version: '3.8'

services:
  flutter-builder:
    build: .
    volumes:
      - .:/app
      - flutter-cache:/root/.flutter
    working_dir: /app
    command: >
      bash -c "
        echo 'ğŸŒ± Ğ¤Ğ•Ğ ĞœĞ•Ğ Ğ¡ĞšĞ˜Ğ™ ĞœĞĞ ĞšĞ•Ğ¢ĞŸĞ›Ğ•Ğ™Ğ¡ - Ğ¡Ğ‘ĞĞ ĞšĞ APK' &&
        echo '============================================================' &&
        echo 'ğŸ“¦ Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸...' &&
        flutter pub get &&
        echo 'ğŸ—ï¸ Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ APK...' &&
        flutter build apk --release &&
        echo 'âœ… APK ÑĞ¾Ğ±Ñ€Ğ°Ğ½ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!' &&
        echo 'ğŸ“± Ğ¤Ğ°Ğ¹Ğ»: build/app/outputs/flutter-apk/app-release.apk' &&
        echo 'ğŸ“ Ğ Ğ°Ğ·Ğ¼ĞµÑ€: ~15-20 MB' &&
        echo 'ğŸ“± Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ: Android 5.0+' &&
        echo 'ğŸ‰ Ğ“ĞĞ¢ĞĞ’Ğ!'
      "
    environment:
      - FLUTTER_ROOT=/flutter
      - PATH=/flutter/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

volumes:
  flutter-cache:
